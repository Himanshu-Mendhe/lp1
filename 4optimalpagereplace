Code:

import java.util.*;

public class OptimalPageReplacement {

    // Function to implement Optimal Page Replacement
    public static void optimalPageReplacement(int[] pages, int capacity) {
        List<Integer> memory = new ArrayList<>(capacity);
        int pageFaults = 0;
        int pageHits = 0;

        for (int i = 0; i < pages.length; i++) {
            int page = pages[i];

            // If page already in memory â†’ Page Hit
            if (memory.contains(page)) {
                pageHits++;
                continue;
            }

            // Page Fault occurs
            if (memory.size() < capacity) {
                memory.add(page);
            } else {
                // Replace page using Optimal strategy
                int farthest = -1, indexToReplace = -1;

                for (int j = 0; j < memory.size(); j++) {
                    int nextUse = Integer.MAX_VALUE;

                    // Find next use of this memory[j]
                    for (int k = i + 1; k < pages.length; k++) {
                        if (memory.get(j) == pages[k]) {
                            nextUse = k;
                            break;
                        }
                    }

                    // Choose page with farthest next use
                    if (nextUse > farthest) {
                        farthest = nextUse;
                        indexToReplace = j;
                    }
                }

                // Replace selected page
                memory.set(indexToReplace, page);
            }

            pageFaults++;
        }

        // Final results only
        System.out.println("Total Page Faults: " + pageFaults);
        System.out.println("Total Page Hits: " + pageHits);
    }

    public static void main(String[] args) {
        int[] pages = {7, 0, 1, 2, 0, 3, 0, 4, 2, 3, 0, 3, 2};
        int capacity = 4;

        optimalPageReplacement(pages, capacity);
    }
}



